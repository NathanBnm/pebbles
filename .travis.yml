---

language: node_js

dist: focal

node_js:
  - 10.17.0

sudo: required

services:
  - docker

before_install:
  - sudo apt install libgtk-3-dev
  - sudo apt install gobject-introspection
  - sudo apt install valac
  - sudo apt-get update -y
  - sudo apt-get install -y libgio2.0-cil-dev
  - wget "https://gitlab.gnome.org/GNOME/libhandy/-/archive/1.0.3/libhandy-1.0.3.tar.gz"
  - tar --strip-components=1 -zxf libhandy-1.0.3.tar.gz
  - mkdir _build
  - meson . _build
  - ninja -C _build
  - ninja -C _build install

addons:
  apt:
    sources:
      - sourceline: "ppa:ubuntu-toolchain-r/test"
    packages:
      - meson

install:
  - npm i -g @elementaryos/houston

script:
  - houston ci
